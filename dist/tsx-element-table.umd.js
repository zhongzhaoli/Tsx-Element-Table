(function(e,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue"),require("vuedraggable")):typeof define=="function"&&define.amd?define(["vue","vuedraggable"],m):(e=typeof globalThis<"u"?globalThis:e||self,e.TsxElementTable=m(e.Vue,e.VueDraggable))})(this,function(e,m){"use strict";const y="table-",z="-header",A="handle-left",S={index:"索引",selection:"选择"},B="default",T=10,x=1,k=0,D=!0,O="total, sizes, prev, pager, next, jumper",U=[10,20,50,100],P=[{value:"large",label:"宽松"},{value:"default",label:"默认"},{value:"small",label:"紧凑"}];/*! Element Plus Icons Vue v2.3.1 */var F=e.defineComponent({name:"Open",__name:"open",setup(t){return(g,d)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M329.956 257.138a254.862 254.862 0 0 0 0 509.724h364.088a254.862 254.862 0 0 0 0-509.724zm0-72.818h364.088a327.68 327.68 0 1 1 0 655.36H329.956a327.68 327.68 0 1 1 0-655.36z"}),e.createElementVNode("path",{fill:"currentColor",d:"M694.044 621.227a109.227 109.227 0 1 0 0-218.454 109.227 109.227 0 0 0 0 218.454m0 72.817a182.044 182.044 0 1 1 0-364.088 182.044 182.044 0 0 1 0 364.088"})]))}}),j=F,I=e.defineComponent({name:"Operation",__name:"operation",setup(t){return(g,d)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64z"})]))}}),M=I,R=e.defineComponent({name:"Refresh",__name:"refresh",setup(t){return(g,d)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),v=R;function V(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e.isVNode(t)}return e.defineComponent({name:"TsxElementTable",components:{draggable:m},props:{size:{type:String,default:B},tableColumns:{type:Array,required:!0},table:{type:Object,required:!0},handle:{type:Object,default:()=>{}},pagination:{type:Object,default:()=>{}},currentPage:{type:Number,default:x},pageSize:{type:Number,default:T}},setup(t,{slots:g,emit:d,expose:$}){const _=e.ref(t.size),L=e.ref(null),w=e.ref();e.watch(()=>t.tableColumns,o=>{o&&H(o)},{deep:!0,immediate:!0});const E=e.ref(!1);$({getTableRef:()=>L.value,updateTableColumns:()=>H(t.tableColumns)});function H(o){w.value=o.map(a=>({...a,show:a.show??!0}))}function G(o){const a=`${y}${o.prop}`;return g[a]}function K(o){const a=`${y}${o.prop}${z}`;return g[a]}function W(){return g[A]}function Z(o){const a={},s=G(o),f=K(o);s&&(a.default=i=>s(i)),f&&(a.header=i=>f(i));let C=o.labelClassName?o.labelClassName.split(" "):[];return t.table.border&&C.push("label-border-top"),o.show&&e.createVNode(e.resolveComponent("el-table-column"),e.mergeProps(o,{key:o.prop,"label-class-name":C.join(" ")}),V(a)?a:{default:()=>[a]})}function q(){var p,u,l,N;const o=e.ref((t==null?void 0:t.currentPage)||x),a=e.ref((t==null?void 0:t.pageSize)||T),s=((p=t==null?void 0:t.pagination)==null?void 0:p.total)||k,f=((u=t.pagination)==null?void 0:u.show)??D;if(!(f==="auto"?s>a:f))return;const i=n=>{d("update:currentPage",n),d("page-change",{currentPage:n,pageSize:a})},c=n=>{d("update:pageSize",n),d("page-change",{currentPage:o.value,pageSize:n})};return e.createVNode("div",{className:"tetPaginationBox"},[e.createVNode(e.resolveComponent("el-pagination"),{size:e.unref(_),"current-page":o.value,"onUpdate:current-page":n=>o.value=n,"page-size":a.value,"onUpdate:page-size":n=>a.value=n,total:s,pageSizes:((l=t.pagination)==null?void 0:l.pageSizes)||U,layout:((N=t.pagination)==null?void 0:N.layout)||O,onCurrentChange:i,onSizeChange:c},null)])}function X(){var i;let o;const{table:a}=t,s=e.getCurrentInstance(),f={};return Object.keys(((i=s==null?void 0:s.vnode)==null?void 0:i.props)??[]).filter(c=>c.startsWith("on")&&!c.startsWith("onUpdate")).forEach(c=>{const u=c.replace("on","").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();f[c]=(...l)=>{d(u,...l)}}),e.createVNode("div",{className:"tetTableBox"},[e.withDirectives(e.createVNode(e.resolveComponent("el-table"),e.mergeProps({ref:L,size:e.unref(_)},f,a,{height:"100%"}),V(o=(e.unref(w)||[]).map(c=>Z(c)))?o:{default:()=>[o]}),[[e.resolveDirective("loading"),t.table.loading||!1]])])}function Y(){var i;if(!t.handle||!(((i=t.handle)==null?void 0:i.show)??!0))return;const a=e.computed(()=>e.unref(_)==="large"?"default":e.unref(_));function s(){var u;const c=l=>{d("handle-click",l)},p=W();return e.createVNode(e.Fragment,null,[e.createVNode("div",{className:"tetHandleLeftBtnBox"},[(((u=t.handle)==null?void 0:u.columns)||[]).filter(l=>l.show!==!1).map(l=>e.createVNode(e.resolveComponent("el-button"),{size:e.unref(a),key:l.key,type:l.type||"",onClick:l.action??(()=>c(l.key))},{default:()=>[l.label]}))]),e.createVNode("div",{className:"tetHandleLeftSlotBox"},[p&&p()])])}function f(){const c={default:()=>e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(a),icon:M},null),dropdown:()=>{let r;return e.createVNode(e.resolveComponent("el-dropdown-menu"),null,V(r=P.map(b=>e.createVNode(e.resolveComponent("el-dropdown-item"),{command:b.value,disabled:e.unref(_)===b.value},{default:()=>[b.label]})))?r:{default:()=>[r]})}},p=r=>{_.value=r,d("size-change",r)},u=()=>{d("table-refresh")},l=()=>{E.value=!0},N=r=>{d("handle-right-click",r)},n=()=>{var r,b;if((r=t.handle)!=null&&r.rightColumns)return(b=t.handle)==null?void 0:b.rightColumns.filter(h=>h.show!==!1).map(h=>{const J={...new Object(h.icon)};return e.createVNode("div",null,[e.createVNode(e.resolveComponent("el-tooltip"),{content:h.tooltip},{default:()=>[e.createVNode(e.resolveComponent("el-button"),{circle:!0,loading:"loading"in h&&h.loading,size:e.unref(a),icon:J,onClick:()=>N(h.key)},null)]})])})};return e.createVNode(e.Fragment,null,[n(),e.createVNode("div",null,[e.createVNode(e.resolveComponent("el-tooltip"),{content:"表格刷新"},{default:()=>[e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(a),icon:v,onClick:u},null)]})]),e.createVNode("div",{class:"xsHidden"},[e.createVNode(e.resolveComponent("el-tooltip"),{content:"表格大小"},{default:()=>[e.createVNode(e.resolveComponent("el-dropdown"),{trigger:"click",onCommand:p},V(c)?c:{default:()=>[c]})]})]),e.createVNode("div",{class:"xsHidden"},[e.createVNode(e.resolveComponent("el-tooltip"),{content:"字段管理"},{default:()=>[e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(a),icon:j,onClick:l},null)]})])])}function C(){const c=()=>{E.value=!1},p=n=>e.createVNode(e.resolveComponent("el-checkbox"),{key:"normal",modelValue:n.show,"onUpdate:modelValue":r=>n.show=r,label:n.prop},{default:()=>[n.label]}),u=n=>e.createVNode(e.resolveComponent("el-checkbox"),{key:n.type,disabled:!0,"model-value":!0},{default:()=>[S[n.type]]}),l=n=>!n.fixed&&!n.type,N=n=>l(n.relatedContext.element);return e.createVNode(e.resolveComponent("el-drawer"),{width:"320px","append-to-body":!0,"model-value":E.value,title:"字段管理",onClose:c},{default:()=>[e.createVNode(m,{"item-key":"prop",filter:".forbid",modelValue:w.value,"onUpdate:modelValue":n=>w.value=n,animation:200,move:N},{item:n=>{const{element:r}=n;return e.createVNode("div",{class:{columnDragItem:!0,forbid:!l(r)}},[e.createVNode("div",{class:"iconBox"},[l(r)&&e.createVNode("svg",{t:"1728528547556",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4317",width:"512",height:"512"},[e.createVNode("path",{d:"M909.3 506.3L781.7 405.6c-4.7-3.7-11.7-0.4-11.7 5.7V476H548V254h64.8c6 0 9.4-7 5.7-11.7L517.7 114.7c-2.9-3.7-8.5-3.7-11.3 0L405.6 242.3c-3.7 4.7-0.4 11.7 5.7 11.7H476v222H254v-64.8c0-6-7-9.4-11.7-5.7L114.7 506.3c-3.7 2.9-3.7 8.5 0 11.3l127.5 100.8c4.7 3.7 11.7 0.4 11.7-5.7V548h222v222h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H548V548h222v64.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.7-2.9 3.7-8.5 0.1-11.4z","p-id":"4318"},null)])]),r.type&&S[r.type]?u(r):p(r)])}})]})}return e.createVNode("div",{className:"tetHandleBox"},[e.createVNode("div",{className:"tetHandleLeftBox"},[s()]),e.createVNode("div",{className:"tetHandleRightBox"},[f()]),C()])}return()=>e.createVNode("div",{className:"TsxElementTableContainer"},[Y(),X(),q()])}})});
