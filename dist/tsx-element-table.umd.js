(function(e,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue")):typeof define=="function"&&define.amd?define(["vue"],m):(e=typeof globalThis<"u"?globalThis:e||self,e.TsxElementTable=m(e.Vue))})(this,function(e){"use strict";const m="table-",z="-header",A="handle-left",S={index:"索引",selection:"选择"},L="default",T=10,y=1,B=0,H=!0,k="total, sizes, prev, pager, next, jumper",O=[10,20,50,100],U=[{value:"large",label:"宽松"},{value:"default",label:"默认"},{value:"small",label:"紧凑"}];/*! Element Plus Icons Vue v2.3.1 */var P=e.defineComponent({name:"Open",__name:"open",setup(t){return(g,d)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M329.956 257.138a254.862 254.862 0 0 0 0 509.724h364.088a254.862 254.862 0 0 0 0-509.724zm0-72.818h364.088a327.68 327.68 0 1 1 0 655.36H329.956a327.68 327.68 0 1 1 0-655.36z"}),e.createElementVNode("path",{fill:"currentColor",d:"M694.044 621.227a109.227 109.227 0 1 0 0-218.454 109.227 109.227 0 0 0 0 218.454m0 72.817a182.044 182.044 0 1 1 0-364.088 182.044 182.044 0 0 1 0 364.088"})]))}}),D=P,F=e.defineComponent({name:"Operation",__name:"operation",setup(t){return(g,d)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64z"})]))}}),R=F,j=e.defineComponent({name:"Refresh",__name:"refresh",setup(t){return(g,d)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[e.createElementVNode("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),I=j;function b(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e.isVNode(t)}return e.defineComponent({name:"TsxElementTable",props:{size:{type:String,default:L},table:{type:Object,required:!0},handle:{type:Object,default:()=>{}},pagination:{type:Object,default:()=>{}},currentPage:{type:Number,default:y},pageSize:{type:Number,default:T}},setup(t,{slots:g,emit:d,expose:M}){const C=e.ref(t.size),x=e.ref(null),E=e.ref();e.watch(()=>t.table,o=>{E.value=o.columns.map(n=>({...n,show:n.show??!0}))},{deep:!0,immediate:!0});const w=e.ref(!1);M({getTableRef:()=>x.value});function $(o){const n=`${m}${o.prop}`;return g[n]}function G(o){const n=`${m}${o.prop}${z}`;return g[n]}function K(){return g[A]}function W(o){const n={},s=$(o),f=G(o);return s&&(n.default=h=>s(h)),f&&(n.header=h=>f(h)),o.show&&e.createVNode(e.resolveComponent("el-table-column"),e.mergeProps(o,{key:o.prop}),b(n)?n:{default:()=>[n]})}function Z(){var p,i,a,r;const o=e.ref((t==null?void 0:t.currentPage)||y),n=e.ref((t==null?void 0:t.pageSize)||T),s=((p=t==null?void 0:t.pagination)==null?void 0:p.total)||B,f=((i=t.pagination)==null?void 0:i.show)??H;if(!(f==="auto"?s>n:f))return;const _=c=>{d("update:currentPage",c),d("page-change",{currentPage:c,pageSize:n})},l=c=>{d("update:pageSize",c),d("page-change",{currentPage:o.value,pageSize:c})};return e.createVNode("div",{className:"tetPaginationBox"},[e.createVNode(e.resolveComponent("el-pagination"),{size:e.unref(C),"current-page":o.value,"onUpdate:current-page":c=>o.value=c,"page-size":n.value,"onUpdate:page-size":c=>n.value=c,total:s,pageSizes:((a=t.pagination)==null?void 0:a.pageSizes)||O,layout:((r=t.pagination)==null?void 0:r.layout)||k,onCurrentChange:_,onSizeChange:l},null)])}function q(){var _;let o;const{table:n}=t,s=e.getCurrentInstance(),f={};return Object.keys(((_=s==null?void 0:s.vnode)==null?void 0:_.props)??[]).filter(l=>l.startsWith("on")&&!l.startsWith("onUpdate")).forEach(l=>{const i=l.replace("on","").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();f[l]=(...a)=>{d(i,...a)}}),e.createVNode("div",{className:"tetTableBox"},[e.createVNode(e.resolveComponent("el-table"),e.mergeProps({ref:x,size:e.unref(C)},f,n),b(o=(e.unref(E)||[]).map(l=>W(l)))?o:{default:()=>[o]})])}function X(){var _;if(!t.handle||!(((_=t.handle)==null?void 0:_.show)??!0))return;const n=e.computed(()=>e.unref(C)==="large"?"default":e.unref(C));function s(){var i;const l=a=>{d("handle-click",a)},p=K();return e.createVNode(e.Fragment,null,[e.createVNode("div",{className:"tetHandleLeftBtnBox"},[(((i=t.handle)==null?void 0:i.columns)||[]).map(a=>e.createVNode(e.resolveComponent("el-button"),{size:e.unref(n),key:a.key,type:a.type||"",onClick:a.action??(()=>l(a.key))},{default:()=>[a.label]}))]),e.createVNode("div",{className:"tetHandleLeftSlotBox"},[p&&p()])])}function f(){const l={default:()=>e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(n),icon:R},null),dropdown:()=>{let u;return e.createVNode(e.resolveComponent("el-dropdown-menu"),null,b(u=U.map(N=>e.createVNode(e.resolveComponent("el-dropdown-item"),{command:N.value,disabled:e.unref(C)===N.value},{default:()=>[N.label]})))?u:{default:()=>[u]})}},p=u=>{C.value=u,d("size-change",u)},i=()=>{d("table-refresh")},a=()=>{w.value=!0},r=u=>{d("handle-right-click",u)},c=()=>{var u,N;if((u=t.handle)!=null&&u.rightColumns)return(N=t.handle)==null?void 0:N.rightColumns.map(V=>e.createVNode("div",null,[e.createVNode(e.resolveComponent("el-tooltip"),{content:V.tooltip},{default:()=>[e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(n),icon:V.icon,onClick:()=>r(V.key)},null)]})]))};return e.createVNode(e.Fragment,null,[c(),e.createVNode("div",null,[e.createVNode(e.resolveComponent("el-tooltip"),{content:"表格刷新"},{default:()=>[e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(n),icon:I,onClick:i},null)]})]),e.createVNode("div",null,[e.createVNode(e.resolveComponent("el-tooltip"),{content:"表格大小"},{default:()=>[e.createVNode(e.resolveComponent("el-dropdown"),{trigger:"click",onCommand:p},b(l)?l:{default:()=>[l]})]})]),e.createVNode("div",null,[e.createVNode(e.resolveComponent("el-tooltip"),{content:"字段管理"},{default:()=>[e.createVNode(e.resolveComponent("el-button"),{circle:!0,size:e.unref(n),icon:D,onClick:a},null)]})])])}function h(){const l=()=>{w.value=!1},p=r=>e.createVNode(e.resolveComponent("el-checkbox"),{key:"normal",modelValue:r.show,"onUpdate:modelValue":c=>r.show=c,label:r.prop},{default:()=>[r.label]}),i=r=>e.createVNode(e.resolveComponent("el-checkbox"),{key:r.type,disabled:!0,"model-value":!0},{default:()=>[S[r.type]]}),a={default:()=>(e.unref(E)||[]).map(r=>r.type&&S[r.type]?i(r):p(r))};return e.createVNode(e.resolveComponent("el-drawer"),{width:"320px","append-to-body":!0,"model-value":w.value,title:"字段管理",onClose:l},b(a)?a:{default:()=>[a]})}return e.createVNode("div",{className:"tetHandleBox"},[e.createVNode("div",{className:"tetHandleLeftBox"},[s()]),e.createVNode("div",{className:"tetHandleRightBox"},[f()]),h()])}return()=>e.createVNode("div",{className:"TsxElementTableContainer"},[X(),q(),Z()])}})});
